(this.webpackJsonpguandacontactman=this.webpackJsonpguandacontactman||[]).push([[0],{182:function(e,t,n){},283:function(e,t,n){},287:function(e,t,n){"use strict";n.r(t);var a=n(4),c=n(0),r=n.n(c),s=n(28),i=n.n(s),o=n(10),u=n.n(o),l=n(21),j=(n(182),n(171)),d=n(26),f=n(129),p=n.n(f),b=n(294),x=n(175),m=!1,h=function(e,t){m||(m=!0,"success"===e?x.a.success({message:"\u6210\u529f",description:t,duration:1.5}):"error"===e&&x.a.error({message:"\u932f\u8aa4",description:t,duration:1.5}),setTimeout((function(){m=!1}),2e3))},O=n(292),g=n(34),v=n(38),y=n(297),w=n(298),k=n(293),N=function(e){var t=e.appName,n=r.a.useContext(Q),c=r.a.useState(!1),s=Object(d.a)(c,2),i=s[0],o=s[1],j=r.a.useState(""),f=Object(d.a)(j,2),p=f[0],b=f[1],x=r.a.useState(""),m=Object(d.a)(x,2),h=m[0],O=m[1],g=function(){var e=Object(l.a)(u.a.mark((function e(){var a,c,r,s,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.fetch("get","/api/app/".concat(t));case 2:a=e.sent,c=a.report,r=Object(v.a)(c);try{for(r.s();!(s=r.n()).done;)"App locked"===(i=s.value).Key?o("true"===i.Value):"App dir"===i.Key?b(i.Value):"App deploy source"===i.Key&&O(i.Value)}catch(u){r.e(u)}finally{r.f()}case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.useEffect((function(){g()}),[]),Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(y.b,{bordered:!0,column:{sm:2,xs:1},children:[Object(a.jsx)(y.b.Item,{label:"Lock",children:Object(a.jsx)(w.a,{checked:i})}),Object(a.jsx)(y.b.Item,{label:"App dir",children:p}),Object(a.jsx)(y.b.Item,{label:"App deploy source",children:h}),Object(a.jsx)(y.b.Item,{label:"Git remote Add",children:Object(a.jsx)(k.a.Paragraph,{copyable:!0,children:"git remote add ".concat(t," dokku@").concat(n.globalDomain,":").concat(t)})})]})})},C=n(43),S=n(290),P=function(e){var t=e.title,n=e.message,c=e.onClick,r=e.disabled;return Object(a.jsx)(C.a,{type:"primary",danger:!0,disabled:r,onClick:function(){b.a.confirm({title:"Confirm",icon:Object(a.jsx)("i",{}),content:n,okText:"Confirm?",cancelText:"Cancel",onOk:c})},children:t})},I=n(291),A=n(295),D=function(e){var t=e.title,n=e.onClick,c=e.disabled,r=e.htmlType,s=void 0===r?"button":r;return Object(a.jsx)(C.a,{type:"primary",disabled:c,onClick:n,htmlType:s,children:t})},T=function(e){var t=e.onSuccess,n=e.appName,c=r.a.useContext(Q);r.a.useEffect((function(){}),[]);var s=function(){var e=Object(l.a)(u.a.mark((function e(a){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.setModal(null),e.next=3,c.fetch("post","/api/proxy/".concat(n),{scheme:a.scheme,hostPort:a.hostPort,containerPort:a.containerPort});case 3:e.sent&&(h("success","Success Add"),t());case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsxs)(I.a,{onFinish:s,children:[Object(a.jsx)("h5",{className:"font-weight-bold mb-4",children:"Add Proxy"}),Object(a.jsx)(I.a.Item,{name:"scheme",rules:[{required:!0,message:"Input scheme"}],children:Object(a.jsx)(A.a,{prefix:Object(a.jsx)("i",{className:"fa fa-shield"}),placeholder:"Please input scheme"})}),Object(a.jsx)(I.a.Item,{name:"hostPort",rules:[{required:!0,message:"Input host port"}],children:Object(a.jsx)(A.a,{prefix:Object(a.jsx)("i",{className:"fa fa-hand-o-down"}),placeholder:"Please input host port"})}),Object(a.jsx)(I.a.Item,{name:"containerPort",rules:[{required:!0,message:"Input container port"}],children:Object(a.jsx)(A.a,{prefix:Object(a.jsx)("i",{className:"fa fa-hand-o-up"}),placeholder:"Please input container port"})}),Object(a.jsx)(I.a.Item,{className:"text-center",children:Object(a.jsx)(D,{title:"Add",htmlType:"submit"})})]})},F=function(e){var t=e.appName,n=r.a.useContext(Q),c=r.a.useState([]),s=Object(d.a)(c,2),i=s[0],o=s[1],j=r.a.useState(!1),f=Object(d.a)(j,2),p=f[0],x=f[1],m=r.a.useState(""),O=Object(d.a)(m,2),k=O[0],N=O[1],I=function(){var e=Object(l.a)(u.a.mark((function e(){var a,c,r,s,i,l,j,d,f,p,b;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.fetch("get","/api/proxy/".concat(t));case 2:a=e.sent,c=a.report,r=[],s=Object(v.a)(c);try{for(s.s();!(i=s.n()).done;)if("Proxy enabled"===(l=i.value).Key)x("true"===l.Value);else if("Proxy type"===l.Key)N(l.Value);else if("Proxy port map"===l.Key){j=l.Value.split(" "),d=Object(v.a)(j);try{for(d.s();!(f=d.n()).done;)p=f.value,3===(b=p.split(":")).length&&r.push({scheme:b[0],hostPort:b[1],containerPort:b[2]})}catch(u){d.e(u)}finally{d.f()}}}catch(u){s.e(u)}finally{s.f()}o(r);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();r.a.useEffect((function(){JSON.parse(g.get("user")||"{}");I()}),[]);var A=[{title:"Scheme",align:"center",dataIndex:"scheme"},{title:"HostPort",align:"center",dataIndex:"hostPort"},{title:"ContainerPort",align:"center",dataIndex:"containerPort"},{title:"Delete",align:"center",render:function(e){return Object(a.jsx)(P,{title:"Delete Proxy",message:"Confirm delete proxy?",onClick:Object(l.a)(u.a.mark((function a(){return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,n.fetch("delete","/api/proxy/".concat(t),{scheme:e.scheme,hostPort:e.hostPort,containerPort:e.containerPort});case 2:a.sent&&I();case 4:case"end":return a.stop()}}),a)})))})}}],D=function(){var e=Object(l.a)(u.a.mark((function e(){var c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=p?"disable":"enable",b.a.confirm({title:"Confirm to ".concat(c," proxy?"),icon:Object(a.jsx)("i",{}),content:c,okText:"Confirm",cancelText:"Cancel",onOk:function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.fetch("patch","/api/proxy/".concat(t,"/").concat(c));case 2:e.sent&&(h("success","Success ".concat(c," proxy")),I());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"mb-2 d-flex flex-row-reverse",children:Object(a.jsx)(C.a,{type:"primary",onClick:function(){n.setModal(Object(a.jsx)(T,{onSuccess:I,appName:t}))},children:"Add Proxy"})}),Object(a.jsxs)(y.b,{bordered:!0,column:{xxl:4,xl:3,lg:3,md:3,sm:2,xs:1},children:[Object(a.jsx)(y.b.Item,{label:"Enable",children:Object(a.jsx)(w.a,{checked:p,onChange:D})}),Object(a.jsx)(y.b.Item,{label:"Proxy Type",children:k})]}),Object(a.jsx)("div",{className:"m-2"}),Object(a.jsx)(S.a,{dataSource:i,columns:A,pagination:!1})]})},E=function(e){var t=e.onSuccess,n=e.appName,c=r.a.useContext(Q);r.a.useEffect((function(){}),[]);var s=function(){var e=Object(l.a)(u.a.mark((function e(a){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.setModal(null),e.next=3,c.fetch("post","/api/domain/".concat(n),[a.domain]);case 3:e.sent&&(h("success","Success Add"),t());case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsxs)(I.a,{onFinish:s,children:[Object(a.jsx)("h5",{className:"font-weight-bold mb-4",children:"Add Domain"}),Object(a.jsx)(I.a.Item,{name:"domain",rules:[{required:!0,message:"Input domain"}],children:Object(a.jsx)(A.a,{prefix:Object(a.jsx)("i",{className:"fa fa-user"}),placeholder:"Please input domain"})}),Object(a.jsx)(I.a.Item,{className:"text-center",children:Object(a.jsx)(D,{title:"Add",htmlType:"submit"})})]})},K=function(e){var t=e.appName,n=r.a.useContext(Q),c=r.a.useState([]),s=Object(d.a)(c,2),i=s[0],o=s[1],j=r.a.useState(!1),f=Object(d.a)(j,2),p=f[0],b=f[1],x=function(){var e=Object(l.a)(u.a.mark((function e(){var a,c,r,s,i,l,j,d,f,p;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.fetch("get","/api/domain/".concat(t));case 2:a=e.sent,c=a.report,r=[],s=Object(v.a)(c);try{for(s.s();!(i=s.n()).done;)if("Domains app enabled"===(l=i.value).Key)b("true"===l.Value);else if("Domains app vhosts"===l.Key){j=l.Value.split(" "),d=Object(v.a)(j);try{for(d.s();!(f=d.n()).done;)""!==(p=f.value)&&r.push({host:p})}catch(u){d.e(u)}finally{d.f()}}}catch(u){s.e(u)}finally{s.f()}o(r);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();r.a.useEffect((function(){JSON.parse(g.get("user")||"{}");x()}),[]);var m=[{title:"Host",align:"center",dataIndex:"host"},{title:"Delete",align:"center",render:function(e){return Object(a.jsx)(P,{title:"Delete Domain",message:"Confirm delete domain?",onClick:Object(l.a)(u.a.mark((function a(){return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,n.fetch("delete","/api/domain/".concat(t),[e.host]);case 2:a.sent&&x();case 4:case"end":return a.stop()}}),a)})))})}}];return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"mb-2 d-flex flex-row-reverse",children:Object(a.jsx)(C.a,{type:"primary",onClick:function(){n.setModal(Object(a.jsx)(E,{onSuccess:x,appName:t}))},children:"Add Domain"})}),Object(a.jsx)(y.b,{bordered:!0,column:{xxl:4,xl:3,lg:3,md:3,sm:2,xs:1},children:Object(a.jsx)(y.b.Item,{label:"Enable",children:Object(a.jsx)(w.a,{checked:p})})}),Object(a.jsx)("div",{className:"m-2"}),Object(a.jsx)(S.a,{dataSource:i,columns:m,pagination:!1})]})},V=function(e){var t=e.appName,n=r.a.useContext(Q),c=r.a.useState([]),s=Object(d.a)(c,2),i=s[0],o=s[1],j=function(){var e=Object(l.a)(u.a.mark((function e(){var a,c,r,s,i,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.fetch("get","/api/git/".concat(t));case 2:a=e.sent,c=a.report,r=[],s=Object(v.a)(c);try{for(s.s();!(i=s.n()).done;)l=i.value,r.push({key:l.Key,value:l.Value})}catch(u){s.e(u)}finally{s.f()}o(r);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();r.a.useEffect((function(){JSON.parse(g.get("user")||"{}");j()}),[]);return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(S.a,{dataSource:i,columns:[{title:"Key",align:"center",dataIndex:"key"},{title:"Value",align:"center",dataIndex:"value"}],pagination:!1})})},M=function(e){var t=e.onSuccess,n=e.appName,c=e.restart,s=r.a.useContext(Q);r.a.useEffect((function(){}),[]);var i=function(){var e=Object(l.a)(u.a.mark((function e(a){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.setModal(null),e.next=3,s.fetch("post","/api/config/".concat(n),{restart:c,config:[{key:a.key,value:a.value}]});case 3:e.sent&&(h("success","Success Add"),t());case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsxs)(I.a,{onFinish:i,children:[Object(a.jsx)("h5",{className:"font-weight-bold mb-4",children:"Add Config"}),Object(a.jsx)(I.a.Item,{label:"Key",name:"key",rules:[{required:!0,message:"Input key"}],children:Object(a.jsx)(A.a,{prefix:Object(a.jsx)("i",{className:"fa fa-key"}),placeholder:"Please input key"})}),Object(a.jsx)(I.a.Item,{label:"Value",name:"value",rules:[{required:!0,message:"Input value"}],children:Object(a.jsx)(A.a,{prefix:Object(a.jsx)("i",{className:"fa fa-folder-open"}),placeholder:"Please input value"})}),Object(a.jsxs)(I.a.Item,{className:"text-center",children:[Object(a.jsx)(a.Fragment,{}),Object(a.jsx)(D,{title:"Add",htmlType:"submit"})]})]})},q=function(e){var t=e.appName,n=r.a.useContext(Q),c=r.a.useState([]),s=Object(d.a)(c,2),i=s[0],o=s[1],j=r.a.useState(!0),f=Object(d.a)(j,2),p=f[0],b=f[1],x=function(){var e=Object(l.a)(u.a.mark((function e(){var a,c,r,s,i,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.fetch("get","/api/config/".concat(t));case 2:a=e.sent,c=a.report,r=[],s=Object(v.a)(c);try{for(s.s();!(i=s.n()).done;)l=i.value,r.push({key:l.Key,value:l.Value})}catch(u){s.e(u)}finally{s.f()}o(r);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();r.a.useEffect((function(){JSON.parse(g.get("user")||"{}");x()}),[]);var m=[{title:"Key",align:"center",dataIndex:"key"},{title:"Value",align:"center",dataIndex:"value"},{title:"Delete",align:"center",render:function(e){return Object(a.jsx)(P,{title:"Delete",message:"Confirm delete config key?",onClick:Object(l.a)(u.a.mark((function a(){return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,n.fetch("delete","/api/config/".concat(t,"/").concat(e.key,"?restart=").concat(p));case 2:a.sent&&x();case 4:case"end":return a.stop()}}),a)})))})}}];return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"mb-2 d-flex ",children:[Object(a.jsx)("div",{className:"mx-1",children:"Restart After Change"}),Object(a.jsx)(w.a,{checked:p,onChange:b}),Object(a.jsx)("div",{className:"flex-fill"}),Object(a.jsx)(C.a,{type:"primary",onClick:function(){n.setModal(Object(a.jsx)(M,{onSuccess:x,appName:t,restart:p}))},children:"Add Config"})]}),Object(a.jsx)(S.a,{dataSource:i,columns:m,pagination:!1})]})},J=n(296),L=n(167),G=n.n(L),H=function(e){var t=e.appName,n=r.a.useContext(Q),c=r.a.useState([]),s=Object(d.a)(c,2),i=s[0],o=s[1],j=r.a.useState(10),f=Object(d.a)(j,2),p=f[0],b=f[1],x=function(){var e=Object(l.a)(u.a.mark((function e(){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.fetch("get","/api/logs/".concat(t,"/").concat(p));case 2:(a=e.sent)&&o(a.report.split("\n"));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.useEffect((function(){JSON.parse(g.get("user")||"{}");x()}),[]),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{children:[Object(a.jsx)(J.a,{min:1,defaultValue:p,onChange:function(e){b(e)}}),Object(a.jsx)(D,{title:"Show ".concat(p," of logs"),onClick:x})]}),Object(a.jsxs)(k.a,{children:[Object(a.jsx)(k.a.Title,{children:"".concat(t," LOG")}),i.map((function(e){return Object(a.jsx)(k.a.Paragraph,{children:Object(a.jsx)(G.a,{children:e})})}))]})]})},R=function(e){var t=e.appName,n=(r.a.useContext(Q),function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}());r.a.useEffect((function(){JSON.parse(g.get("user")||"{}");n()}),[]);return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(O.a,{defaultActiveKey:"1",onChange:function(e){},children:[Object(a.jsx)(O.a.TabPane,{tab:"Report",children:Object(a.jsx)(N,{appName:t})},"report"),Object(a.jsx)(O.a.TabPane,{tab:"Proxy",children:Object(a.jsx)(F,{appName:t})},"proxy"),Object(a.jsx)(O.a.TabPane,{tab:"Domain",children:Object(a.jsx)(K,{appName:t})},"domain"),Object(a.jsx)(O.a.TabPane,{tab:"Git",children:Object(a.jsx)(V,{appName:t})},"git"),Object(a.jsx)(O.a.TabPane,{tab:"Config",children:Object(a.jsx)(q,{appName:t})},"config"),Object(a.jsx)(O.a.TabPane,{tab:"Log",children:Object(a.jsx)(H,{appName:t})},"log")]})})},B=function(){var e=r.a.useContext(Q);r.a.useEffect((function(){}),[]);var t=function(){var t=Object(l.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setModal(null),t.next=3,e.fetch("post","/api/app/".concat(n.appName),[n.domain]);case 3:if(!t.sent){t.next=8;break}return h("success","Success Add"),t.next=8,e.getApps();case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(a.jsxs)(I.a,{onFinish:t,children:[Object(a.jsx)("h5",{className:"font-weight-bold mb-4",children:"Add Domain"}),Object(a.jsx)(I.a.Item,{name:"appName",rules:[{required:!0,message:"Input AppName"}],children:Object(a.jsx)(A.a,{prefix:Object(a.jsx)("i",{className:"fa fa-desktop"}),placeholder:"Please input AppName"})}),Object(a.jsx)(I.a.Item,{className:"text-center",children:Object(a.jsx)(D,{title:"Add",htmlType:"submit"})})]})},z=function(){var e=r.a.useContext(Q),t=Object(a.jsx)(C.a,{type:"primary",onClick:function(){e.setModal(Object(a.jsx)(B,{}))},children:"Add new App"});return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(O.a,{defaultActiveKey:"domain",tabBarExtraContent:t,children:[Object(a.jsx)(O.a.TabPane,{tab:"Domain",children:Object(a.jsx)(W,{})},"domain"),Object(a.jsx)(O.a.TabPane,{tab:"Config",children:Object(a.jsx)(U,{})},"config")]})})},U=function(){var e=r.a.useContext(Q),t=r.a.useState([]),n=Object(d.a)(t,2),c=n[0],s=n[1],i=r.a.useState(!0),o=Object(d.a)(i,2),j=o[0],f=o[1],p=function(){var t=Object(l.a)(u.a.mark((function t(){var n,a,c,r,i,o;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetch("get","/api/globalconfig");case 2:if(n=t.sent){a=n.report,c=[],r=Object(v.a)(a);try{for(r.s();!(i=r.n()).done;)o=i.value,c.push({key:o.Key,value:o.Value})}catch(u){r.e(u)}finally{r.f()}s(c)}case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();r.a.useEffect((function(){JSON.parse(g.get("user")||"{}");p()}),[]);var b=[{title:"Key",align:"center",dataIndex:"key"},{title:"Value",align:"center",dataIndex:"value"},{title:"Delete",align:"center",render:function(t){return Object(a.jsx)(P,{title:"Delete",message:"Confirm delete config key?",onClick:Object(l.a)(u.a.mark((function n(){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.fetch("delete","/api/globalconfig/".concat(t.key,"?restart=").concat(j));case 2:n.sent&&p();case 4:case"end":return n.stop()}}),n)})))})}}],x=function(e){var t=e.onSuccess,n=r.a.useContext(Q);r.a.useEffect((function(){}),[]);var c=function(){var e=Object(l.a)(u.a.mark((function e(a){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setModal(null),e.next=3,n.fetch("post","/api/globalconfig",{restart:j,config:[{key:a.key,value:a.value}]});case 3:e.sent&&(h("success","Success Add"),t());case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsxs)(I.a,{onFinish:c,children:[Object(a.jsx)("h5",{className:"font-weight-bold mb-4",children:"Add Config"}),Object(a.jsx)(I.a.Item,{label:"Key",name:"key",rules:[{required:!0,message:"Input key"}],children:Object(a.jsx)(A.a,{prefix:Object(a.jsx)("i",{className:"fa fa-key"}),placeholder:"Please input key"})}),Object(a.jsx)(I.a.Item,{label:"Value",name:"value",rules:[{required:!0,message:"Input value"}],children:Object(a.jsx)(A.a,{prefix:Object(a.jsx)("i",{className:"fa fa-folder-open"}),placeholder:"Please input value"})}),Object(a.jsxs)(I.a.Item,{className:"text-center",children:[Object(a.jsx)(a.Fragment,{}),Object(a.jsx)(D,{title:"Add",htmlType:"submit"})]})]})};return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"mb-2 d-flex ",children:[Object(a.jsx)("div",{className:"mx-1",children:"Restart After Change"}),Object(a.jsx)(w.a,{checked:j,onChange:f}),Object(a.jsx)("div",{className:"flex-fill"}),Object(a.jsx)(C.a,{type:"primary",onClick:function(){e.setModal(Object(a.jsx)(x,{onSuccess:p}))},children:"Add Config"})]}),Object(a.jsx)(S.a,{dataSource:c,columns:b,pagination:!1})]})},W=function(){var e=r.a.useContext(Q),t=r.a.useState([]),n=Object(d.a)(t,2),c=n[0],s=n[1],i=function(){var t=Object(l.a)(u.a.mark((function t(){var n,a,c,r,i,o,l,j,d,f;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetch("get","/api/globaldomain");case 2:if(n=t.sent){a=n.report,c=[],r=Object(v.a)(a);try{for(r.s();!(i=r.n()).done;)if("Domains global vhosts"===(o=i.value).Key){l=o.Value.split(" "),j=Object(v.a)(l);try{for(j.s();!(d=j.n()).done;)""!==(f=d.value)&&c.push({host:f})}catch(u){j.e(u)}finally{j.f()}}}catch(u){r.e(u)}finally{r.f()}c.length>0&&e.setGlobalDomain(c[0].host),s(c)}case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();r.a.useEffect((function(){JSON.parse(g.get("user")||"{}");i()}),[]);var o=[{title:"Host",align:"center",dataIndex:"host"},{title:"Delete",align:"center",render:function(t){return Object(a.jsx)(P,{title:"Delete Domain",message:"Confirm delete domain?",onClick:Object(l.a)(u.a.mark((function n(){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.fetch("delete","/api/globaldomain/".concat(t.host),[t.host]);case 2:n.sent&&i();case 4:case"end":return n.stop()}}),n)})))})}}],j=function(e){var t=e.onSuccess,n=r.a.useContext(Q);r.a.useEffect((function(){}),[]);var c=function(){var e=Object(l.a)(u.a.mark((function e(a){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setModal(null),e.next=3,n.fetch("post","/api/globaldomain",[a.domain]);case 3:e.sent&&(h("success","Success Add"),t());case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsxs)(I.a,{onFinish:c,children:[Object(a.jsx)("h5",{className:"font-weight-bold mb-4",children:"Add Domain"}),Object(a.jsx)(I.a.Item,{name:"domain",rules:[{required:!0,message:"Input domain"}],children:Object(a.jsx)(A.a,{prefix:Object(a.jsx)("i",{className:"fa fa-user"}),placeholder:"Please input domain"})}),Object(a.jsx)(I.a.Item,{className:"text-center",children:Object(a.jsx)(D,{title:"Add",htmlType:"submit"})})]})};return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"mb-2 d-flex flex-row-reverse",children:Object(a.jsx)(C.a,{type:"primary",onClick:function(){e.setModal(Object(a.jsx)(j,{onSuccess:i}))},children:"Add Domain"})}),Object(a.jsx)("div",{className:"m-2"}),Object(a.jsx)(S.a,{dataSource:c,columns:o,pagination:!1})]})},Q=r.a.createContext(void 0),X={key:"/global",title:"Global",component:Object(a.jsx)(z,{})},Y=function(e){var t=e.children,n=r.a.useState("/#/login"),c=Object(d.a)(n,1)[0],s=r.a.useState("/#/global"),i=Object(d.a)(s,1)[0],o=r.a.useState(null),f=Object(d.a)(o,2),x=f[0],m=f[1],O=r.a.useState(""),g=Object(d.a)(O,2),v=g[0],y=g[1],w=r.a.useState([]),k=Object(d.a)(w,2),N=k[0],C=k[1],S=r.a.useState(""),P=Object(d.a)(S,2),I=P[0],A=P[1];r.a.useEffect((function(){E(),p.a.defaults.baseURL="",p.a.defaults.headers.common["Content-Type"]="application/json"}),[]);var D=function(){var e=Object(l.a)(u.a.mark((function e(t,n,a){var r,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=null,e.prev=1,e.next=4,p()({method:t,url:n,data:a});case 4:if(s=e.sent,console.log("response",s.data),999999!==s.data.errorCode){e.next=9;break}return window.location.href=c,e.abrupt("return",null);case 9:if(0===s.data.errorCode){e.next=11;break}throw new Error(s.data.errorMessage);case 11:r=s.data,e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),h("error",e.t0.message);case 17:return e.abrupt("return",r);case 18:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t,n,a){return e.apply(this,arguments)}}(),T=function(){var e=Object(l.a)(u.a.mark((function e(t,n){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D("post","/api/account/login",{account:t,password:n});case 2:a=e.sent,y(t),a&&0===a.errorCode?(h("success","Login"),window.location.href=i):window.location.href=c;case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),F=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D("post","/api/account/logout",{});case 2:window.location.href=c;case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D("get","/api/redirect");case 2:e.sent||(window.location.href=c);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),K=function(){var e=Object(l.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D("get","/api/apps");case 2:(t=e.sent)&&(n=t.list.map((function(e){return{key:"/".concat(e),title:e,component:Object(a.jsx)(R,{appName:e})}})),C([X].concat(Object(j.a)(n))));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.jsxs)(Q.Provider,{value:{loginPage:c,homePage:i,setModal:function(e){return m(e)},account:v,setAccount:y,fetch:D,login:T,logout:F,redirect:E,globalDomain:I,setGlobalDomain:A,getApps:K,menus:N,setMenus:C},children:[x&&Object(a.jsx)(b.a,{visible:null!==x,onOk:function(){return m(null)},onCancel:function(){return m(null)},footer:null,closable:!1,children:x}),t]})},Z=n(137),$=n(30),_=n(289),ee=n(299),te=n(76),ne=function(e){var t=e.menus,n=e.title,c=e.icon,s=e.content,i=r.a.useContext(Q),o=Object($.f)();return Object(a.jsxs)(_.a,{className:"vh-100",children:[Object(a.jsx)(_.a.Sider,{collapsible:!0,trigger:null,style:{overflow:"auto"},children:Object(a.jsx)(te.a,{theme:"dark",mode:"inline",selectedKeys:[window.location.hash.slice(1)],defaultOpenKeys:[window.location.hash.slice(1)],onClick:function(e){e.item;var t=e.key;o.push(t)},children:t.map((function(e){return Object(a.jsx)(te.a.Item,{children:Object(a.jsxs)("span",{className:"d-flex align-items-center",children:[Object(a.jsx)("div",{className:"anticon",children:Object(a.jsx)("i",{className:e.icon})}),Object(a.jsx)("span",{children:e.title})]})},e.key)}))})}),Object(a.jsxs)(_.a,{className:"bg-white",children:[Object(a.jsxs)(_.a.Header,{className:"d-flex align-items-center px-3 bg-white shadow-sm",style:{zIndex:1},children:[Object(a.jsxs)("div",{children:[Object(a.jsx)("i",{className:c}),Object(a.jsx)("span",{className:"ml-2",children:n})]}),Object(a.jsx)("div",{className:"flex-fill"}),Object(a.jsx)(ee.a,{placement:"bottom",content:Object(a.jsx)("div",{className:"d-flex flex-column",children:Object(a.jsx)(C.a,{type:"link",danger:!0,onClick:function(){return i.logout()},children:"logout"})}),children:Object(a.jsx)(C.a,{type:"link",icon:Object(a.jsx)("i",{className:"fa fa-sign-out mr-2"}),children:"Logout"})})]}),Object(a.jsx)(_.a.Content,{style:{overflow:"auto"},children:Object(a.jsx)("div",{className:"m-3",children:s})})]})]})},ae=function(){var e=r.a.useContext(Q);return r.a.useEffect((function(){(function(){var t=Object(l.a)(u.a.mark((function t(){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetch("get","/account/redirect");case 2:n=t.sent,window.location.href=n?e.homePage:e.loginPage;case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[]),Object(a.jsx)(a.Fragment,{})},ce=function(){var e=r.a.useContext(Q),t=function(){return Object(a.jsxs)(I.a,{onFinish:function(t){return e.login(t.account,t.password)},children:[Object(a.jsx)(I.a.Item,{name:"account",rules:[{required:!0,message:"Please Input Account!"}],children:Object(a.jsx)(A.a,{prefix:Object(a.jsx)("i",{className:"fa fa-user"}),placeholder:"Please input account"})}),Object(a.jsx)(I.a.Item,{name:"password",rules:[{required:!0,message:"Please Input Password!"}],children:Object(a.jsx)(A.a.Password,{prefix:Object(a.jsx)("i",{className:"fa fa-lock"}),placeholder:"Please input password"})}),Object(a.jsx)(I.a.Item,{className:"text-center",children:Object(a.jsx)(C.a,{type:"primary",shape:"round",htmlType:"submit",children:"Login"})})]})};return Object(a.jsx)("div",{className:"d-flex align-items-center vh-100",children:Object(a.jsxs)("div",{className:"container",children:[Object(a.jsx)("div",{className:"row justify-content-center",children:Object(a.jsx)("div",{className:"col-4 m-4 text-center font-weight-bold",style:{fontSize:"20px"},children:"Dokku Web UI"})}),Object(a.jsx)("div",{className:"m-5"}),Object(a.jsx)("div",{className:"row justify-content-center",children:Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(t,{})})})]})})},re=function(){return Object(a.jsx)(a.Fragment,{})},se=function(){var e=r.a.useContext(Q),t=function(){var t=Object(l.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getApps();case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return r.a.useEffect((function(){JSON.parse(g.get("user")||"{}");t()}),[]),Object(a.jsx)(Z.a,{children:Object(a.jsxs)($.c,{children:[Object(a.jsx)($.a,{path:"/",exact:!0,component:ae}),Object(a.jsx)($.a,{path:"/login",component:ce}),e.menus.map((function(t){return Object(a.jsx)($.a,{path:t.key,children:Object(a.jsx)(ne,{menus:e.menus,title:t.title,icon:t.icon,content:t.component})},t.key)})),Object(a.jsx)($.a,{path:"*",component:re})]})})},ie=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,300)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))};n(283),n(284),n(285),n(286);i.a.render(Object(a.jsx)(Y,{children:Object(a.jsx)(se,{})}),document.getElementById("root")),ie()}},[[287,1,2]]]);
//# sourceMappingURL=main.dffaff86.chunk.js.map